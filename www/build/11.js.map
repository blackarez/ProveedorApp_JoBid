{"version":3,"sources":["../../src/pages/service-win/service-win.module.ts","../../src/pages/service-win/service-win.ts"],"names":[],"mappings":"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","file":"11.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { ServiceWinPage } from './service-win';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ServiceWinPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(ServiceWinPage),\r\n  ],\r\n})\r\nexport class ServiceWinPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/service-win/service-win.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, AlertController} from 'ionic-angular';\r\n\r\n//-service\r\nimport { SaleService } from '../../services/sale.service';\r\nimport { ProfessionalsService } from '../../services/professionals.service';\r\nimport { NotificacionService } from '../../services/notificacion.service';\r\n/**\r\n * Generated class for the ServiceWinPage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-service-win',\r\n  templateUrl: 'service-win.html',\r\n})\r\nexport class ServiceWinPage {\r\n  //-data\r\n  DataService:any=[];\r\n  //-view\r\n  user:string;\r\n  offer:string;\r\n  sale:any;\r\n\r\n  userActual:string;\r\n\r\n  //-subcrip\r\n  statusSub:any;\r\n\r\n  constructor(public navCtrl: NavController, public navParams: NavParams,\r\n    public alertCtrl: AlertController, private saleService :SaleService,\r\n    private professionalsService:ProfessionalsService,\r\n    private notificacionService : NotificacionService,\r\n  ) {\r\n    this.DataService = this.navParams.get('datos');\r\n    this.user = this.DataService['idUser'];\r\n    this.offer = this.DataService['idOff'];\r\n    this.sale = this.DataService['sale'];\r\n    console.log(this.DataService);\r\n    this.userActual = localStorage.getItem('verificacion');\r\n    // console.log(this.userActual);\r\n    this.getStatusService();\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    console.log('ionViewDidLoad ServiceWinPage');\r\n  }\r\n\r\ngetStatusService(){\r\n  this.statusSub = this.saleService.getStatus(this.user,this.offer).subscribe(\r\n    (status) =>{\r\n      console.log('statusSub-S service-win');\r\n      console.log(status);\r\n      if(status['$value']){\r\n        if(status['$value'] == 'Waiting for the professional'){\r\n          this.notificacionHired();\r\n          this.goServiceNew();\r\n          console.log('statusSub-US service-win');\r\n          this.statusSub.unsubscribe();\r\n        }\r\n        if(status['$value'] == 'Cancelled'){\r\n          this.notificacionCancel();\r\n          this.goIndexService();\r\n          console.log('statusSub-US service-win');\r\n          this.statusSub.unsubscribe();\r\n        }\r\n      }\r\n    });\r\n}\r\n\r\ngoServiceNew(){\r\n  console.info('goServiceWin');\r\n  this.showAlertService();\r\n  //-contarct\r\n  console.log(this.DataService);\r\n  let objContract = {\"status\":'Waiting for the professional','User':this.user,'info':this.DataService['info'],'sale':this.DataService['sale']};\r\n  // console.log(objContract);\r\n  this.professionalsService.newContract(this.userActual,this.offer,objContract);\r\n\r\n  //-data\r\n  let dataService = {'datos':this.DataService};\r\n  console.log(dataService);\r\n  this.navCtrl.setRoot('ServiceNewPage',dataService);\r\n  // this.navCtrl.setRoot('ServiceNewPage');\r\n  // console.log(this.statusSub);\r\n  \r\n}\r\n\r\ngoIndexService(){\r\n  this.showAlertCancel();\r\n  this.navCtrl.setRoot('ShowPage');\r\n  // this.statusSub.unsubscribe();\r\n  // console.log(this.statusSub);\r\n\r\n}\r\n  //-alert\r\n  \r\nshowAlertService() {\r\n  let alerteMail = this.alertCtrl.create({\r\n    title: 'Information',\r\n    message: 'Congratulations, the customer has accepted your offer, you can go to the customer to start the service.',\r\n    buttons: ['OK']\r\n  });\r\n  alerteMail.present();\r\n}\r\n\r\nshowAlertCancel() {\r\n  let alerteMail = this.alertCtrl.create({\r\n    title: 'Information',\r\n    message: 'Sorry. The client has canceled the service.',\r\n    buttons: ['OK']\r\n  });\r\n  alerteMail.present();\r\n}\r\n\r\n//-notification\r\nnotificacionHired(){\r\n  console.info('Nota: You have been hired');\r\n  this.notificacionService.mostrar('You have been hired',5);\r\n}\r\nnotificacionCancel(){\r\n  console.info('Nota: The service has been canceled');\r\n  this.notificacionService.mostrar('The service has been canceled',6);\r\n}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/service-win/service-win.ts"],"sourceRoot":""}