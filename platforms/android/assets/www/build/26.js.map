{"version":3,"sources":["../../src/pages/login/login.module.ts","../../src/pages/login/login.ts"],"names":[],"mappings":"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","file":"26.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { LoginPage } from './login';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    LoginPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(LoginPage),\r\n  ],\r\n})\r\nexport class LoginPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, AlertController} from 'ionic-angular';\r\nimport { Validators, FormBuilder, FormGroup } from '@angular/forms';\r\nimport { AngularFireAuth } from 'angularfire2/auth';\r\nimport * as firebase from 'firebase/app';\r\nimport { Facebook } from '@ionic-native/facebook';\r\n\r\n//-service\r\nimport { ProfessionalsService } from '../../services/professionals.service';\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-login',\r\n  templateUrl: 'login.html',\r\n})\r\nexport class LoginPage {\r\n  //-Data user\r\n  userData = {\"username\":\"\",\"password\":\"\"};\r\n  userDataUpdate: any =[];\r\n  pass:any;\r\n\r\n  //-- form validation\r\n  private todo : FormGroup;\r\n    constructor(public navCtrl: NavController , public navParams: NavParams, \r\n      public alertCtrl: AlertController, private professionalsService : ProfessionalsService,\r\n      public afAuth: AngularFireAuth,\r\n      private fb:  Facebook,\r\n      private formBuilder: FormBuilder,\r\n    ) {\r\n      // this.pass =\"mi clave\";\r\n      this.todo = this.formBuilder.group({\r\n        username: ['', Validators.required],\r\n        password: ['', Validators.required],\r\n      });\r\n  \t}\r\n\r\n  ionViewDidLoad() {\r\n    console.log('ionViewDidLoad LoginPage');\r\n  }\r\n\r\n  login(){\r\n\r\n    let getUserLogin= this.professionalsService.getUserLoginPwd(this.userData[\"password\"]);\r\n    // console.log(getUserLogin);\r\n    // console.log(JSON.stringify( getUserLogin) );\r\n\r\n    let userPromesa = getUserLogin.subscribe( (value)=> {\r\n        // console.log('success');\r\n        console.log('userPromesa-S login');\r\n        console.log(value);\r\n        if(value['0']){\r\n          // console.log(value['0']['prof_username']);\r\n          // console.log(value['0']['prof_email']);\r\n          if( (this.userData[\"username\"] == value['0']['prof_username']) || (this.userData[\"username\"] == value['0']['prof_email'])){\r\n            console.info('existeUserPwd');\r\n            this.loginFirebaseUserMail(value['0']);\r\n          }\r\n        }else{\r\n          this.showAlertLogin();\r\n          console.error('-usuario no se encuentra en base de datos');\r\n        }\r\n        console.log('userPromesa-US login');\r\n      userPromesa.unsubscribe();  \r\n    });\r\n}\r\n\r\nloginFirebaseUserMail(datos:any){\r\n//   console.log(datos);\r\n//   console.log(datos['$key']);\r\n//   console.log (datos['prof_email']);\r\n//  console.log ( datos['prof_password']);\r\n\r\n  this.userDataUpdate = {\"username\":datos[\"prof_username\"],\"password\":datos[\"prof_password\"],\"email\":datos[\"prof_email\"],\"name\":datos[\"prof_name\"],\"lastName\":datos[\"prof_lastName\"],\"date\":datos[\"prof_date\"],\"socialSecurity\":datos[\"prof_socialSecurity\"],\"zipcode\":datos[\"prof_zipcode\"],\"state\":datos[\"prof_state\"],\"picture\":datos[\"prof_picture\"],\"pais\":datos[\"prof_pais\"],\"direccion\":datos[\"prof_direccion\"],\"tel\":datos[\"prof_tel\"],\"star\":datos[\"prof_star\"]};\r\n\r\n  console.log(this.userDataUpdate);\r\n  try{\r\n    const result = this.afAuth.auth.signInWithEmailAndPassword(datos['prof_email'],datos['prof_password']).then( ()=>{\r\n    console.log(result);\r\n      this.userDataUpdate['verificacion'] = datos['$key'];\r\n      localStorage.setItem('verificacion',datos['$key']);\r\n      console.log(this.userDataUpdate);\r\n\r\n      // let Data = {'datos':this.userDataUpdate}\r\n      // this.navCtrl.setRoot(ShowPage,Data);\r\n        this.navCtrl.setRoot('ShowPage');\r\n    }).catch(\r\n      (error) =>{\r\n        this.showAlertLogin();\r\n      });\r\n  }catch(e){ console.error(e); console.error('error ')}\r\n}\r\n\r\nfacebookir(){\r\n// let goPagePrehome:boolean = false;\r\n// let userDB:any;\r\n  try{\r\n  // firebase.auth().signInWithPopup(new firebase.auth.FacebookAuthProvider())\r\n  // // firebase.auth().signInWithRedirect(new firebase.auth.FacebookAuthProvider())\r\n  //   .then(\r\n    this.fb.login(['email'])\r\n    .then((res) => {\r\n      console.log('Logged into Facebook!', res);\r\n      // alert(JSON.stringify(res));\r\n      let credencial = firebase.auth.FacebookAuthProvider.credential(res.authResponse.accessToken);\r\n      firebase.auth().signInWithCredential(credencial).then(\r\n      (info) => {\r\n      //console.log(res.user.email);\r\n      // alert(res.authResponse.accessToken);\r\n      // alert(credencial);\r\n      // alert(JSON.stringify(info));\r\n      // alert(JSON.stringify(info.providerData['0']['email']));\r\n      // alert(JSON.stringify(info.providerData));\r\n      console.log(info);\r\n      console.info(JSON.stringify(info));\r\n      if(info.providerData[\"0\"].email){\r\n        let userBD =this.professionalsService.getProfessionalExists(info.providerData[\"0\"].email).subscribe(\r\n              (value)=>{\r\n                console.info(JSON.stringify(value));\r\n                console.log('professionalsService-S login');\r\n                for(let key in value){\r\n                  // console.log(value[key]);\r\n                  if(value[key]){\r\n                    console.log(value[key]);\r\n                    console.info(JSON.stringify(value[key]));\r\n                    this.goNextPagePrehomeFace(value[key]);\r\n                  }\r\n                }\r\n                console.log('professionalsService-US login');\r\n                userBD.unsubscribe();\r\n              }\r\n            );\r\n          }\r\n      }\r\n      ).catch(e => {\r\n        console.log('Error signInWithCredential', e);\r\n        // alert(JSON.stringify(e));\r\n        // alert('Error signInWithCredential');\r\n      });\r\n    }).catch(e => {\r\n    console.log('Error zing into Facebook', e)\r\n    // alert(JSON.stringify(e));\r\n    });\r\n  }catch(e){console.error(e); \r\n    // alert('try c info');\r\n}\r\n}\r\n \r\ngoNextPagePrehomeFace(datos:any){\r\n//   console.log(datos);\r\n// alert('gonexpagePre');\r\n  console.log(datos['$key']);\r\n  console.log (datos['prof_email']);\r\n console.log ( datos['prof_password']);\r\n\r\n  this.userDataUpdate = {\"username\":datos[\"prof_username\"],\"password\":datos[\"prof_password\"],\"email\":datos[\"prof_email\"],\"name\":datos[\"prof_name\"],\"lastName\":datos[\"prof_lastName\"],\"date\":datos[\"prof_date\"],\"socialSecurity\":datos[\"prof_socialSecurity\"],\"zipcode\":datos[\"prof_zipcode\"],\"state\":datos[\"prof_state\"],\"picture\":datos[\"prof_picture\"],\"pais\":datos[\"prof_pais\"],\"direccion\":datos[\"prof_direccion\"],\"tel\":datos[\"prof_tel\"],\"star\":datos[\"prof_star\"]};\r\n\r\n  // console.log(this.userDataUpdate);\r\n      \r\n  this.userDataUpdate['verificacion'] = datos['$key'];\r\n  localStorage.setItem('verificacion',datos['$key']);\r\n  console.log(this.userDataUpdate);\r\n  this.navCtrl.setRoot('ShowPage');\r\n   \r\n}\r\n  \r\n//-- alertas\r\n  showAlertLogin() {\r\n    let alert = this.alertCtrl.create({\r\n      title: 'login failed',\r\n      subTitle: 'Bad request wrong username or email and password',\r\n      buttons: ['OK']\r\n    });\r\n    alert.present();\r\n  } \r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ts"],"sourceRoot":""}