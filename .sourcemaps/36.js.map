{"version":3,"sources":["../../src/pages/service-info/service-info.module.ts","../../src/pages/service-info/service-info.ts"],"names":[],"mappings":"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","file":"36.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { ServiceInfoPage } from './service-info';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ServiceInfoPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(ServiceInfoPage),\r\n  ],\r\n})\r\nexport class ServiceInfoPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/service-info/service-info.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, AlertController } from 'ionic-angular';\r\n\r\nimport { SaleService } from '../../services/sale.service';\r\nimport { OfferService } from '../../services/offer.service';\r\n\r\n/**\r\n * Generated class for the ServiceInfoPage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-service-info',\r\n  templateUrl: 'service-info.html',\r\n})\r\nexport class ServiceInfoPage {\r\n  //-data\r\n  DataService:any= [];\r\n  userActual:any;\r\n  //-data view\r\n  imagenUser:any;\r\n  offer:any;\r\n  userName:any;\r\n  info:any;\r\n  contador:any;\r\n  NoGoSale:boolean=false;\r\n  //-sub\r\n  timerSubs:any;\r\n  statusSubs:any;\r\n\r\n  //-default\r\n  serviceImage = 'assets/img/User/FotoServiceInfo.JPG';\r\n\r\n  constructor(public navCtrl: NavController, public navParams: NavParams,\r\n    private saleService: SaleService, private offerService :OfferService,\r\n    public alertCtrl: AlertController,\r\n  ) {\r\n    this.DataService = this.navParams.get('datos');\r\n    console.log(this.DataService);\r\n    this.callInfo();\r\n    this.userActual= localStorage.getItem('verificacion');\r\n    this.LoadTimmer();\r\n  }\r\n  \r\n  ionViewDidLoad() {\r\n    console.log('ionViewDidLoad ServiceInfoPage');\r\n    // console.log(localStorage);\r\n  }\r\n  goSale(){\r\n    console.log('statusSubs-US service-info');\r\n    console.log('timerSubs-US service-info');\r\n    this.statusSubs.unsubscribe();\r\n    this.timerSubs.unsubscribe();\r\n    this.saleService.setSaleProvider(this.DataService.idUser,this.DataService.idOff,this.userActual,'-');\r\n    let Data = {'datos':this.DataService};\r\n    this.navCtrl.setRoot('ServiceSalePage',Data);\r\n  }\r\n\r\n  callInfo(){\r\n    this.imagenUser = this.DataService.img;\r\n    this.offer = this.DataService.sale;\r\n    this.userName = this.DataService.name;\r\n    this.info = this.DataService.info;\r\n    this.loadDescripcion();\r\n  }\r\n\r\n  LoadTimmer(){\r\n    // console.log('tiempo');\r\n    // console.log(this.DataService.idOff);\r\n    // console.log(this.DataService.idUser);\r\n    this.statusSubs = this.saleService.getStatus(this.DataService.idUser,this.DataService.idOff).subscribe(\r\n      (status)=>{\r\n    console.log('statusSubs-S service-info');\r\n        // console.log(status);\r\n        // console.log(status['$value']);\r\n        if(status['$value'] == 'Published'){\r\n          this.timerSubs = this.offerService.getTimmer(this.DataService.idOff).subscribe(\r\n            (timer)=>{\r\n                  console.log('timerSubs-S service-info');\r\n              // console.log(timer);\r\n              if(timer['$value'] != null){\r\n                this.contador= timer['$value'];\r\n                if(this.contador == \"00:15\" || \r\n                this.contador == \"00:14\" ||\r\n                this.contador == \"00:13\" ||\r\n                this.contador == \"00:12\" ||\r\n                this.contador == \"00:10\" ||\r\n                this.contador == \"00:09\" ||\r\n                this.contador == \"00:08\" ||\r\n                this.contador == \"00:07\" ||\r\n                this.contador == \"00:06\" ||\r\n                this.contador == \"00:05\" ||\r\n                this.contador == \"00:04\" ||\r\n                this.contador == \"00:03\" ||\r\n                this.contador == \"00:02\" ||\r\n                this.contador == \"00:01\" \r\n                ){\r\n                  console.log('bloquear');\r\n                  this.NoGoSale = true;\r\n                }\r\n              }\r\n            }\r\n          );\r\n        }else{\r\n          this.contador =\"00:00\";\r\n          this.NoGoSale = true;\r\n          console.log('statusSubs-US service-info');\r\n          console.log('timerSubs-US service-info');\r\n          this.statusSubs.unsubscribe();\r\n          this.timerSubs.unsubscribe();\r\n          if(status['$value'] == 'Cancelled'){\r\n            this.AlertCancelOffer();\r\n            this.goShowPage();\r\n          }\r\n        }\r\n      }\r\n    );\r\n    // if(status == 'Published'){\r\n      // this.timerSubs.unsubscribe();\r\n      // }\r\n    }\r\n\r\n  loadDescripcion(){\r\n     let offerDetailSub = this.offerService.getOffer(this.DataService.idOff).subscribe(\r\n       (DetailBD) =>{\r\n        console.log('offerDetailSub-S service-info');\r\n        console.log(DetailBD);\r\n        if(DetailBD){\r\n          console.log('offerDetailSub-US service-info');\r\n          offerDetailSub.unsubscribe();\r\n        }\r\n       }\r\n     );\r\n  }\r\n  \r\n  goShowPage(){\r\n    this.navCtrl.setRoot('ShowPage');\r\n    console.log('statusSubs-US service-info');\r\n    console.log('timerSubs-US service-info');\r\n    this.statusSubs.unsubscribe();\r\n    this.timerSubs.unsubscribe();\r\n  }\r\n  //- alert\r\n  AlertCancelOffer(){\r\n    let alert = this.alertCtrl.create({\r\n      title: 'Information',\r\n      message: 'The auction was canceled by the Client',\r\n      buttons: ['OK']\r\n    });\r\n    alert.present();\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/service-info/service-info.ts"],"sourceRoot":""}